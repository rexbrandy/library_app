{% extends 'base.html' %}

{% block page_heading %}All Loans{% endblock %}

{% block content %}
<table class="table table-striped">
  <thead>
    <tr>
      <th scope="col">User</th>
      <th scope="col">Book</th>
      <th scope="col">Due back</th>
      <th scope="col">Renew</th>
    </tr>
  </thead>
  <tbody>
    {% for loan in loan_list %}
    <tr>
      <td>{{ loan.user.username }}</td>
      <td>{{ loan.book_instance.book.title }}</td>
      <td>{{ loan.due_back }}</td>
      <td><a href="{% url 'renew-loan-librarian' loan.id %}">Renew</a></td>
    </tr>
    {% endfor %}
  </tbody>
</table>


{% if loan_list %}
  <ul>
    {% for loan in loan_list %}
    <li class="{% if loan.is_overdue %}text-danger{% endif %}">
      <a href="{% url 'book-detail' loan.book_instance.book.pk %}">
        {{ loan.book_instance.book.title }}
      </a>
      ({{ loan.due_back}}) - {{ loan.user.username }}
      {% if perms.catalog.can_mark_returned %} - <a href="{% url 'renew-loan-librarian' loan.id %}">Renew</a>{% endif %}
    </li>
    {% endfor %}
  </ul>
{% else %}
  <p>You don't have any loaned books.</p>
{% endif %}
{% endblock %}