{% extends 'base.html' %}

{% block content %}
<div class="row">
  <div class="col-12">
    <h1 class="display-1"><strong>Update Book</strong></h1>
  </div>
</div>
<div class="row">
  <div class="col-3">
    {% load static %}
    <img src="{% static 'assets/book_placeholder.png'%}" style="max-width: inherit;">
  </div>
  
  <div class="col-9">

    <div class="row">
      <form action="" method="post ">
        <input type="hidden" name="which_form" value="book_form">
        {% csrf_token %}
        {% include 'form_snippet.html' %}
        <div class="mb-3 text-end">
          <button type="submit" class="btn btn-primary">Save book</button>
        </div>
      </form>
    </div>

    <div class="row">
      <form action="" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ book_instance_formset.management_form }}
        <input type="hidden" name="book_id" value="{{ form.instance.id }}">
        <input type="hidden" name="which_form" value="book_instance_form">
        <table class="table table-hover table-borderless caption-top" style="padding-left: 12;">
          <caption class="h5" style="font-weight: normal;">Book copies</caption>
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col" style="width: 30%;">Status</th>
              <th scope="col">Action</th>
            </tr>
          </thead>
          <tbody>

              {% load widget_tweaks %}
              {% for book_instance_form in book_instance_formset %}
              <tr>
                <th scope="row">{{ book_instance_form.id.value }}</th>
                <td>
                  {% render_field book_instance_form.id hidden=True %}              
                  {% render_field book_instance_form.status class='form-control' %}
                </td>
                <td>
                  <button>
                    View
                  </button>
                </td>
              </tr>
              {% endfor %}
          </tbody>
          <tfoot>
            <tr>
              <td><button class="btn btn-link">Add new row</button></td>
              <td></td>
              <td><input class="btn btn-primary" type="submit" value="Save changes"></td>
            </tr>
          </tfoot>
        </table>
      </form>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  function saveChanges(status_value, id) {
    console.log(status_value, id);

    
  }
</script>
{% endblock %}