{% extends 'base.html' %}

{% block content %}
<div class="row">
  <div class="col-12">
    <h1 class="display-1"><strong>Update Book</strong></h1>
  </div>
</div>
<div class="row">
  <div class="col-3">
    {% load static %}
    <img src="{% static 'assets/book_placeholder.png'%}" style="max-width: inherit;">
  </div>
  
  <div class="col-9">
    <div class="row">
      <form action="" method="post">
        {% csrf_token %}
        {% include 'form_snippet.html' %}
        <div class="mb-3 text-end">
          <button type="submit" class="btn btn-primary">Submit</button>
        </div>
      </form>
    </div>
    <div class="row">
      <h3>Book Copies</h3>
      <div class="pl-1">
        <table class="table table-hover" style="padding-left: 12;">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col" style="width: 30%;">Status</th>
              <th scope="col">Action</th>
            </tr>
          </thead>
          <tbody>
            {% load widget_tweaks %}
            {{ formset.management_form }}
            {% for book_instance_form in book_instance_formset %}
            
            <tr>
              <th scope="row">{{ book_instance_form.id.value }}</th>
              <td>{% render_field book_instance_form.status class='form-control' %}</td>
              <td>
                <button class="btn btn-link p-0" 
                onclick="saveChanges(
                  '{{ book_instance_form.status.id_for_label }}',
                  '{{ book_instance_form.id.value}}')"
                >
                  Save
                </button>
              </td>
            </tr>
            {% endfor %}

          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  function saveChanges(status_value, id) {
    console.log(status_value, id)
  }
</script>
{% endblock %}