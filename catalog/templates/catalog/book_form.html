{% extends 'base.html' %}

{% block content %}
<div class="row">
  <div class="col-12">
    <h1 class="display-1"><strong>Update Book</strong></h1>
  </div>
</div>
<div class="row">
  <div class="col-3">
    {% load static %}
    <img src="{% static 'assets/book_placeholder.png'%}" style="max-width: inherit;">
  </div>
  
  <div class="col-9">
    <div class="row">
      <form action="" method="post">
        {% csrf_token %}
        {% include 'form_snippet.html' %}
        <div class="mb-3 text-end">
          <button type="submit" class="btn btn-primary">Submit</button>
        </div>
      </form>
    </div>
    <div class="row">
      <h3>Book Copies</h3>
      <div class="pl-1">
        <table class="table table-hover" style="padding-left: 12;">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col" style="width: 30%;">Status</th>
              <th scope="col">Action</th>
            </tr>
          </thead>
          <tbody>
            {% for book_instance in book.bookinstance_set.all %}
            <tr id="{{ forloop.counter }}_display">
              <th scope="row">{{ book_instance.id }}</th>
              <td>{{ book_instance.get_status_display }}</td>
              <td><button class="btn btn-link p-0" onclick="showFields({{ forloop.counter }})">Edit</button></td>
            </tr>
            <tr id="{{ forloop.counter }}_input" style="display: none;">
              <th scope="row">{{ book_instance.id }}</th>
              <td><input type="text" name="" id=""></td>
              <td><button class="btn btn-link p-0" onclick="saveChanges({{ forloop.counter }})">Save</button></td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function showFields(id) {
  console.log(id)
  document.getElementById(id+"_display").style.display="none";

  document.getElementById(id+"_input").style.display="table-row";
}

function saveChanges(id) {
  console.log(id)
  document.getElementById(id+"_input").style.display="none";

  document.getElementById(id+"_display").style.display="table-row";
}
</script>
{% endblock %}